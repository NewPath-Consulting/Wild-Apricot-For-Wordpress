{
    "$schema": "https://playground.wordpress.net/blueprint-schema.json",
    "preferredVersions": {
        "php": "latest",
        "wp": "latest"
    },
    "meta": {
        "title": "WildApricot Press Demo",
        "description": "loads the latest plugin into a playground site",
        "author": "asirota",
        "categories": [
            "demo",
            "plugin"
        ]
    },
    "siteOptions": {
        "blogname": "WildApricot Press Demo Site"
    },
    "plugins": [
        "https://raw.githubusercontent.com/NewPath-Consulting/Wild-Apricot-Press/1.0.3/assets/pluginzip/Wild-Apricot-Press-1.0.3.zip",
        "error-log-viewer",
        "https://raw.githubusercontent.com/wptrainingteam/playground-demo-handover/main/playground/zips/meta-block-sidebar.zip"
    ],
    "steps": [
        {
            "step": "defineWpConfigConsts",
            "consts": {
                "WP_DISABLE_FATAL_ERROR_HANDLER": true,
                "WP_DEBUG": true,
                "WP_DEBUG_LOG": true,
                "WP_DEBUG_DISPLAY": true,
                "WAP_LICENSE_CHECK_DEV": true
            }
        },
        {
            "step": "writeFile",
            "path": "/wordpress/wp-content/mu-plugins/rewrite.php",
            "data": "<?php /* Use pretty permalinks */ add_action( 'after_setup_theme', function() { global $wp_rewrite; $wp_rewrite->set_permalink_structure('/%postname%/'); $wp_rewrite->flush_rules(); } );"
        },
        {
            "step": "installTheme",
            "themeZipFile": {
                "resource": "wordpress.org/themes",
                "slug": "generatepress"
            }
        },
        {
            "step": "runPHP",
            "code": "<?php require_once('/wordpress/wp-load.php'); wp_insert_post(array( 'post_title' => 'Created by a Playground Blueprint', 'post_content' => '<!-- wp:paragraph --><p>How do you update the meta fields?</p><!-- /wp:paragraph --><!-- wp:list --><ol><!-- wp:list-item --><li>Open the <strong>Settings</strong> sidebar by clicking the window icon next to the blue <strong>Update</strong> button.</li><!-- /wp:list-item --><!-- wp:list-item --><li>Click the <strong>Meta Block Sidebar</strong> menu (below the <strong>Summary</strong> menu).</li><!-- /wp:list-item --><!-- wp:list-item --><li>Type the <strong>Team name</strong> and the <strong>date</strong> the person joined the company in the respective fields.</li><!-- /wp:list-item --><!-- wp:list-item --><li>Click the blue <strong>Update</strong> button.</li><!-- /wp:list-item --></ol><!-- /wp:list -->','post_status' => 'publish' ));"
        },
        {
            "step": "writeFile",
            "path": "/wordpress/wp-content/mu-plugins/bgnightly-notice.php",
            "data": "<?php add_action('admin_notices', function() {  echo '<div class=\"notice notice-info is-dismissible\"><p>Welcome to the WildApricot Press Demo! Please make sure you configure the <a href=\"/wp-admin/admin.php?page=wap-wa-auth-login\">WildApricot Authorized Application Credentials before using the site. A sample license has already been set.</a></p></div>'; });"
        }
    ],
    "features": {
        "networking": true
    },
    "login": true,
    "landingPage": "/wp-admin/admin.php?page=wawp-wal-admin"
}