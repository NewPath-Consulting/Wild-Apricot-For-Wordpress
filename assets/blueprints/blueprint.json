{
    "$schema": "https://playground.wordpress.net/blueprint-schema.json",
    "preferredVersions": {
        "php": "latest",
        "wp": "latest"
    },
    "meta": {
        "title": "WildApricot Press Demo",
        "description": "loads the latest plugin into a playground site",
        "author": "asirota",
        "categories": [
            "demo",
            "plugin"
        ]
    },
    "siteOptions": {
        "blogname": "WildApricot Press Demo Site"
    },
    "plugins": [
        "https://raw.githubusercontent.com/NewPath-Consulting/Wild-Apricot-Press/1.0.3/assets/pluginzip/Wild-Apricot-Press-1.0.3.zip",
        "error-log-viewer",
        "generateblocks"
    ],
    "steps": [
        {
            "step": "defineWpConfigConsts",
            "consts": {
                "WP_DISABLE_FATAL_ERROR_HANDLER": true,
                "WP_DEBUG": true,
                "WP_DEBUG_LOG": true,
                "WP_DEBUG_DISPLAY": true,
                "WAP_LICENSE_CHECK_DEV": true
            }
        },
        {
            "step": "writeFile",
            "path": "/wordpress/wp-content/mu-plugins/rewrite.php",
            "data": "<?php /* Use pretty permalinks */ add_action( 'after_setup_theme', function() { global $wp_rewrite; $wp_rewrite->set_permalink_structure('/%postname%/'); $wp_rewrite->flush_rules(); } );"
        },
        {
            "step": "installTheme",
            "themeZipFile": {
                "resource": "wordpress.org/themes",
                "slug": "generatepress"
            }
        },
        {
            "step": "runPHP",
            "code": "<?php require_once('/wordpress/wp-load.php'); wp_insert_post(array( 'post_title' => 'WildApricot Press', 'post_content' => '<!-- wp:generateblocks/headline {\"uniqueId\":\"a449061d\",\"blockVersion\":3} --><h2 class=\"gb-headline gb-headline-a449061d gb-headline-text\">All the user-friendliness of WordPress with all the power of WildApricot</h2><!-- /wp:generateblocks/headline --><!-- wp:paragraph --><p>WordPress is the world's most popular website builder. WildApricot is the #1 rated  membership management software. Now, your organization can seamlessly combine the best of both with NewPath Consulting's WildApricot Press plugin.</p><!-- /wp:paragraph --><!-- wp:generateblocks/headline {\"uniqueId\":"62b72239\",\"blockVersion\":3,\"typography\":{\"textAlign\":\"left\"}} --><h2 class=\"gb-headline gb-headline-62b72239 gb-headline-text\">Build beautiful, mobile-friendly websites for WildApricot</h2><!-- /wp:generateblocks/headline -->','post_status' => 'publish' ));"
        },
        {
            "step": "writeFile",
            "path": "/wordpress/wp-content/mu-plugins/bgnightly-notice.php",
            "data": "<?php add_action('admin_notices', function() {  echo '<div class=\"notice notice-info is-dismissible\"><p>Welcome to the WildApricot Press Demo! Please make sure you configure the <a href=\"/wp-admin/admin.php?page=wap-wa-auth-login\">WildApricot Authorized Application Credentials before using the site. A sample license has already been set.</a></p></div>'; });"
        }
    ],
    "features": {
        "networking": true
    },
    "login": true,
    "landingPage": "/wp-admin/admin.php?page=wawp-wal-admin"
}